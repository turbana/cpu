{
	"execute_barrel_shifter": {
		"delay": 162,
		"inputs": {
			"_E_A":    {"width": 16, "alias": "n"},
			"_E_B":    {"width": 16},
			"D_ALUop": {"width": 3}
		},
		"assert": "(D_ALUop & 3) != 3",
		"internal": {
			"s": "_E_B & 0xF",
			"r": "(~D_ALUop & 2) >> 1",
			"a": "D_ALUop & 1"
		},
		"outputs": {
			"_E_S": {
				"width": 16,
				"formula": "((n>>s)|((2**16 - 2**(16-s)) * (n>>15))) if r and a else ((n>>s) if r else (n<<s))"
			}
		}
	},
	"execute_forward": {
		"delay": 118,
		"inputs": {
			"D_A":  {"width": 16},
			"D_B":  {"width": 16},
			"D_C":  {"width": 16},
			"D_Ra": {"width": 3},
			"D_Rb": {"width": 3},
			"D_Rc": {"width": 3},
			"E_D":  {"width": 16},
			"E_Rd": {"width": 3},
			"M_D":  {"width": 16},
			"M_Rd": {"width": 3}
		},
		"internal": {
			"ea": "E_Rd ^ D_Ra == 0",
			"eb": "E_Rd ^ D_Rb == 0",
			"ec": "E_Rd ^ D_Rc == 0",
			"ma": "M_Rd ^ D_Ra == 0",
			"mb": "M_Rd ^ D_Rb == 0",
			"mc": "M_Rd ^ D_Rc == 0"
		},
		"outputs": {
			"_E_A": {"width": 16, "formula": "E_D if ea else (M_D if ma else D_A)"},
			"_E_B": {"width": 16, "formula": "E_D if eb else (M_D if mb else D_B)"},
			"_E_C": {"width": 16, "formula": "E_D if ec else (M_D if mc else D_C)"}
		}
	},
	"execute_alu": {
		"delay": 1000,
		"inputs": {
			"_E_A": {"width": 16, "alias": "a"},
			"_E_B": {"width": 16, "alias": "b"},
			"D_ALUop": {"width": 3, "alias": "op"}
		},
		"assert": "D_ALUop != 7",
		"internal": {
			"s": "_E_B & 0xF",
			"r": "(~D_ALUop & 2) >> 1",
			"ar": "D_ALUop & 1"
		},
		"outputs": {
			"_E_D": {
				"width": 16,
				"formula": "a+b if op==0 else (a&b if op ==1 else (a|b if op==2 else (a^b if op==3 else (((a>>s)|((2**16 - 2**(16-s)) * (a>>15))) if r and ar else ((a>>s) if r else (a<<s))))))"
			}
		}
	},
	"proto_alu": {
		"delay": 1000,
		"inputs": {
			"A":   {"width": 4, "alias": "a"},
			"B":   {"width": 4, "alias": "b"},
			"Op":  {"width": 2, "alias": "op"},
			"Cin": {"width": 1}
		},
		"outputs": {
			"D": {
				"width": 4,
				"formula": "a+b+Cin if op==0 else (a&b if op==1 else (a|b if op==2 else a^b))"
			},
			"Cout": {
				"width": 1,
				"formula": "(a+b+Cin)>>4 if op==0 else DONTCARE"
			}
		}
	},
	"ic7408": {
		"delay": 27,
		"inputs": {
			"A": {"width": 4},
			"B": {"width": 4}
		},
		"outputs": {
			"X": {"width": 4, "formula": "A & B"}
		}
	},
	"ic7432": {
		"delay": 10,
		"inputs": {
			"A": {"width": 4},
			"B": {"width": 4}
		},
		"outputs": {
			"X": {"width": 4, "formula": "A | B"}
		}
	},
	"ic7486": {
		"delay": 30,
		"inputs": {
			"A": {"width": 4},
			"B": {"width": 4}
		},
		"outputs": {
			"X": {"width": 4, "formula": "A ^ B"}
		}
	},
	"ic74153": {
		"delay": 34,
		"inputs": {
			"A": {"width": 2},
			"B": {"width": 2},
			"C": {"width": 2},
			"D": {"width": 2},
			"S": {"width": 2}
		},
		"outputs": {
			"X": {"width": 2, "formula": "A if S==0 else (B if S==1 else (C if S==2 else D))"}
		}
	},
	"ic74283": {
		"delay": 320,
		"inputs": {
			"A":   {"width": 16},
			"B":   {"width": 16},
			"Cin": {"width": 1}
		},
		"outputs": {
			"X":    {"width": 16, "formula": "A + B + Cin"},
			"Cout": {"width": 1,  "formula": "(A + B + Cin) >> 16"}
		}
	}
}
